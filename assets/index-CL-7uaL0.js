
/**
 * 由 Fantastic-mobile 提供技术支持
 * Powered by Fantastic-mobile
 * https://fantastic-mobile.hurui.me/
 */
    
import{_ as k}from"./index-OWsJSab9.js";import{_ as L}from"./index.vue_vue_type_script_setup_true_lang-CdUnZKT3.js";import{d,q as y,s as $,r as m,c as i,o as c,w as o,v as f,u as l,P as C,x as b,y as w,n as R,z as B,h as F,g as E,A as I,B as M,C as z,D as P,p as S,E as N,G as j,H as D,I as T,J as V,b as _,e as H,t as G,K as J,a as K}from"./index-DVMzUQcU.js";const[q,U]=$("AvatarRoot");var W=d({__name:"AvatarRoot",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(e){return y(),U({imageLoadingStatus:m("idle")}),(a,t)=>(c(),i(l(C),{"as-child":a.asChild,as:a.as},{default:o(()=>[f(a.$slots,"default")]),_:3},8,["as-child","as"]))}}),Q=W,X=d({__name:"AvatarFallback",props:{delayMs:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(e){const a=e,t=q();y();const r=m(a.delayMs===void 0);return b(n=>{if(a.delayMs&&w){const u=window.setTimeout(()=>{r.value=!0},a.delayMs);n(()=>{window.clearTimeout(u)})}}),(n,u)=>r.value&&l(t).imageLoadingStatus.value!=="loaded"?(c(),i(l(C),{key:0,"as-child":n.asChild,as:n.as},{default:o(()=>[f(n.$slots,"default")]),_:3},8,["as-child","as"])):R("v-if",!0)}}),Y=X;function A(e,a){return e?a?(e.src!==a&&(e.src=a),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Z(e,{referrerPolicy:a,crossOrigin:t}={}){const r=m(!1),n=m(null),u=B(()=>r.value?(!n.value&&w&&(n.value=new window.Image),n.value):null),v=m(A(u.value,e.value)),h=p=>()=>{r.value&&(v.value=p)};return F(()=>{r.value=!0,b(p=>{const s=u.value;if(!s)return;v.value=A(s,e.value);const g=h("loaded"),x=h("error");s.addEventListener("load",g),s.addEventListener("error",x),a!=null&&a.value&&(s.referrerPolicy=a.value),typeof(t==null?void 0:t.value)=="string"&&(s.crossOrigin=t.value),p(()=>{s.removeEventListener("load",g),s.removeEventListener("error",x)})})}),E(()=>{r.value=!1}),v}var O=d({__name:"AvatarImage",props:{src:{type:String,required:!0},referrerPolicy:{type:null,required:!1},crossOrigin:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"img"}},emits:["loadingStatusChange"],setup(e,{emit:a}){const t=e,r=a,{src:n,referrerPolicy:u,crossOrigin:v}=I(t);y();const h=q(),p=Z(n,{referrerPolicy:u,crossOrigin:v});return M(p,s=>{r("loadingStatusChange",s),s!=="idle"&&(h.imageLoadingStatus.value=s)},{immediate:!0}),(s,g)=>z((c(),i(l(C),{role:"img","as-child":s.asChild,as:s.as,src:l(n),"referrer-policy":l(u)},{default:o(()=>[f(s.$slots,"default")]),_:3},8,["as-child","as","src","referrer-policy"])),[[P,l(p)==="loaded"]])}}),ee=O;const ae=d({__name:"Avatar",props:{class:{},size:{default:"sm"},shape:{default:"circle"}},setup(e){const a=e;return(t,r)=>(c(),i(l(Q),{class:S(l(N)(l(re)({size:e.size,shape:e.shape}),a.class))},{default:o(()=>[f(t.$slots,"default")]),_:3},8,["class"]))}}),te=d({__name:"AvatarFallback",props:{delayMs:{},asChild:{type:Boolean},as:{}},setup(e){const a=e;return(t,r)=>(c(),i(l(Y),j(D(a)),{default:o(()=>[f(t.$slots,"default")]),_:3},16))}}),se=d({__name:"AvatarImage",props:{src:{},referrerPolicy:{},crossOrigin:{},asChild:{type:Boolean},as:{}},setup(e){const a=e;return(t,r)=>(c(),i(l(ee),T(a,{class:"h-full w-full object-cover"}),{default:o(()=>[f(t.$slots,"default")]),_:3},16))}}),re=V("inline-flex items-center justify-center font-normal text-foreground select-none shrink-0 bg-secondary overflow-hidden",{variants:{size:{sm:"h-10 w-10 text-xs",base:"h-16 w-16 text-2xl",lg:"h-32 w-32 text-5xl"},shape:{circle:"rounded-full",square:"rounded-md"}}}),le=d({name:"FmAvatar",__name:"index",props:{src:{},fallback:{},shape:{},class:{}},setup(e){const a=e;return(t,r)=>(c(),i(l(ae),{shape:e.shape,class:S(a.class)},{default:o(()=>[_(l(se),{src:e.src},null,8,["src"]),_(l(te),{class:"inline-flex"},{default:o(()=>[f(t.$slots,"default",{},()=>[H(G(e.fallback),1)])]),_:3})]),_:3},8,["shape","class"]))}}),ne={},oe={class:"flex gap-4"};function ue(e,a){const t=le,r=L,n=k;return c(),i(n,{navbar:"","navbar-start-side":"back"},{default:o(()=>[_(r,null,{default:o(()=>[K("div",oe,[_(t,{src:"https://fantastic-mobile.hurui.me/logo.png"}),_(t,{src:"https://fantastic-mobile.hurui.me/logo.png",shape:"square"}),_(t,{src:"",fallback:"Hooray"})])]),_:1})]),_:1})}const fe=J(ne,[["render",ue]]);export{fe as default};
