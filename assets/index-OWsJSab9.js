
/**
 * 由 Fantastic-mobile 提供技术支持
 * Powered by Fantastic-mobile
 * https://fantastic-mobile.hurui.me/
 */
    
import{d as U,aX as ee,a9 as v,aY as te,B as A,aZ as ae,r as se,h as re,a_ as y,z as ne,k as i,o,C as I,a as n,b as m,D as V,u as e,a2 as C,v as p,p as d,E as w,w as _,G as j,H as D,ac as E,n as h,f as oe,t as u,F as H,a$ as ie,m as le,e as ce,l as be,c as W,K as de}from"./index-DVMzUQcU.js";const he={class:"min-h-[var(--g-navbar-min-height)] w-full flex-center"},ue={class:"h-full flex-center whitespace-nowrap px-2 empty:hidden"},fe={class:"truncate"},ve={class:"h-full flex-center whitespace-nowrap px-2 empty:hidden"},pe={key:0,class:"copyright relative flex flex-wrap items-center justify-center p-4 text-sm text-primary/50"},ge={key:0,class:"px-1"},xe=["href"],ye={key:1,class:"px-1"},me={key:2,href:"https://beian.miit.gov.cn/",target:"_blank",rel:"noopener",class:"px-1 text-center no-underline"},ke={class:"min-h-[var(--g-tabbar-min-height)] w-full flex-center px-4"},Ce={key:1,class:"text-xs"},we=U({name:"FmPageLayout",__name:"index",props:{titleCenter:{type:Boolean,default:!0},navbar:{type:Boolean,default:void 0},navbarBorder:{type:Boolean,default:!0},navbarClass:{},tabbar:{type:Boolean,default:void 0},tabbarBorder:{type:Boolean,default:!0},tabbarClass:{},contentClass:{},copyright:{type:Boolean,default:void 0},backTop:{type:Boolean,default:void 0}},emits:["scroll","reachTop","reachBottom"],setup(r,{expose:G,emit:J}){const k=J,R=ie(),a=ee(),g=v("layoutRef"),{y:K,arrivedState:O}=te(g);A(ae(O),t=>{t.top&&k("reachTop"),t.bottom&&k("reachBottom")},{deep:!0}),G({ref:g});function X(t){k("scroll",t)}const S=v("startSideRef"),B=v("endSideRef"),b=se(0),T=CSS.supports("width","round(up, 1.01px, 1px)");re(()=>{const{width:t}=y(S,void 0,{box:"border-box"}),{width:l}=y(B,void 0,{box:"border-box"});A([t,l],c=>{b.value=Math.max(...c)},{immediate:!0})});const $=v("navbarRef"),{height:Y}=y($,void 0,{box:"border-box"}),Z=ne(()=>a.settings.tabbar.list.length>0?a.settings.tabbar.list:[]),F=v("tabbarRef"),{height:q}=y(F,void 0,{box:"border-box"});function z(t){var l,c,x;return R.fullPath===t.path?(c=(l=t.activeIcon)!=null?l:t.icon)!=null?c:void 0:(x=t.icon)!=null?x:void 0}function Q(){var t;(t=g.value)==null||t.scrollTo({top:0,behavior:"smooth"})}return(t,l)=>{var L,M,N,P;const c=oe,x=le("RouterLink");return o(),i("div",{ref_key:"layoutRef",ref:g,class:"relative h-vh flex flex-col overflow-auto overscroll-none supports-[(height:100dvh)]:h-dvh",style:C({"--g-navbar-height":"max(".concat(e(Y),"px, var(--g-navbar-min-height))"),"--g-tabbar-height":"max(".concat(e(q),"px, var(--g-tabbar-min-height))")}),onScroll:l[0]||(l[0]=s=>X(s))},[I(n("header",{ref_key:"navbarRef",ref:$,class:d(e(w)("navbar relative w-full flex-col-center bg-[var(--g-navbar-bg)] text-[var(--g-navbar-color)] transition-all pt-safe min-h+safe-t-[var(--g-navbar-min-height)]",{"shadow-[0_1px_0_0_hsl(var(--border))]":r.navbarBorder},r.navbarClass))},[n("div",he,[n("div",{class:"h-full flex items-center justify-start",style:C({...r.titleCenter&&e(b)&&{width:e(T)?"round(up, ".concat(e(b),"px, 1px)"):"".concat(Math.ceil(e(b)),"px")}})},[n("div",{ref_key:"startSideRef",ref:S,class:"h-full flex-center whitespace-nowrap"},[n("div",ue,[p(t.$slots,"navbar-start",{},void 0,!0)])],512)],4),n("div",{class:d(["min-w-0 flex-1 text-sm",{"text-center":r.titleCenter}])},[n("div",fe,[p(t.$slots,"navbar",{},()=>[ce(u(e(a).title),1)],!0)])],2),n("div",{class:"h-full flex items-center justify-end",style:C({...r.titleCenter&&e(b)&&{width:e(T)?"round(up, ".concat(e(b),"px, 1px)"):"".concat(Math.ceil(e(b)),"px")}})},[n("div",{ref_key:"endSideRef",ref:B,class:"h-full flex-center whitespace-nowrap"},[n("div",ve,[p(t.$slots,"navbar-end",{},void 0,!0)])],512)],4)])],2),[[V,(L=r.navbar)!=null?L:e(a).settings.navbar.enable]]),n("div",{class:d(e(w)("relative flex flex-1 flex-col transition-margin",{...((M=r.navbar)!=null?M:e(a).settings.navbar.enable)&&{"mt+safe-[var(--g-navbar-height)]":!0},...((N=r.tabbar)!=null?N:e(a).settings.tabbar.enable)&&{"mb+safe-[var(--g-tabbar-height)]":!0}},r.contentClass))},[p(t.$slots,"default",{},void 0,!0),m(E,j(D({enterActiveClass:"ease-out",enterFromClass:"opacity-0",enterToClass:"opacity-100",leaveActiveClass:"ease-in",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"})),{default:_(()=>{var s;return[((s=r.copyright)!=null?s:e(a).settings.copyright.enable)?(o(),i("div",pe,[l[1]||(l[1]=n("span",{class:"px-1"},"Copyright",-1)),m(c,{name:"i-ri:copyright-line",class:"text-lg"}),e(a).settings.copyright.dates?(o(),i("span",ge,u(e(a).settings.copyright.dates),1)):h("",!0),e(a).settings.copyright.company?(o(),i(H,{key:1},[e(a).settings.copyright.website?(o(),i("a",{key:0,href:e(a).settings.copyright.website,target:"_blank",rel:"noopener",class:"px-1 text-center no-underline"},u(e(a).settings.copyright.company),9,xe)):(o(),i("span",ye,u(e(a).settings.copyright.company),1))],64)):h("",!0),e(a).settings.copyright.beian?(o(),i("a",me,u(e(a).settings.copyright.beian),1)):h("",!0)])):h("",!0)]}),_:1},16)],2),I(n("footer",{ref_key:"tabbarRef",ref:F,class:d(e(w)("tabbar flex-col-center bg-[var(--g-tabbar-bg)] transition-all pb-safe min-h+safe-b-[calc(var(--g-tabbar-min-height))]",{"shadow-[0_-1px_0_0_hsl(var(--border))]":r.tabbarBorder},r.tabbarClass))},[n("div",ke,[p(t.$slots,"tabbar",{},()=>[(o(!0),i(H,null,be(e(Z),s=>(o(),W(x,{key:JSON.stringify(s),class:d(["flex flex-1 flex-col items-center text-[var(--g-tabbar-color)] no-underline transition-all",{"text-[var(--g-tabbar-active-color)]!":e(R).fullPath===s.path}]),to:s.path,replace:""},{default:_(()=>{var f;return[z(s)?(o(),W(c,{key:0,name:(f=z(s))!=null?f:"",class:d(s.text?"text-6":"text-8")},null,8,["name","class"])):h("",!0),s.text?(o(),i("div",Ce,u(s.text),1)):h("",!0)]}),_:2},1032,["class","to"]))),128))],!0)])],2),[[V,(P=r.tabbar)!=null?P:e(a).settings.tabbar.enable]]),m(E,j(D({enterActiveClass:"ease-out duration-300",enterFromClass:"opacity-0 translate-y-4",enterToClass:"opacity-100 translate-y-0",leaveActiveClass:"ease-in duration-200",leaveFromClass:"opacity-100 scale-100",leaveToClass:"opacity-0 scale-50"})),{default:_(()=>{var s,f;return[((s=r.backTop)!=null?s:e(a).settings.app.enableBackTop)&&e(K)>=200?(o(),i("div",{key:0,class:d(["back-top size-12 flex-center cursor-pointer border rounded-full bg-background shadow-lg transition-all active:bg-border",{...((f=r.tabbar)!=null?f:e(a).settings.tabbar.enable)&&{"bottom+safe-[calc(var(--g-tabbar-height)+16px)]!":!0}}]),onClick:Q},[m(c,{name:"i-icon-park-outline:to-top-one",class:"text-6"})],2)):h("",!0)]}),_:1},16)],36)}}}),Re=de(we,[["__scopeId","data-v-8cc5e725"]]);export{Re as _};
