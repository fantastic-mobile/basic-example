
/**
 * 由 Fantastic-mobile 提供技术支持
 * Powered by Fantastic-mobile
 * https://fantastic-mobile.hurui.me/
 */
    
import{_ as j}from"./index-OWsJSab9.js";import{d as A,z,b0 as $,k as b,o,v as S,u as l,aX as E,b1 as M,c as p,w as e,a as n,n as k,e as t,l as R,F as U,t as B,b as i,_ as X,C as y,j as q,b2 as G}from"./index-DVMzUQcU.js";import{_ as H}from"./index.vue_vue_type_script_setup_true_lang-CdUnZKT3.js";import{s as C}from"./function-call-Dw5N9ZoS.js";const I={class:"contents"},J=A({name:"FmAuth",__name:"index",props:{value:{},all:{type:Boolean}},setup(P){const r=P,a=z(()=>r.all?$().authAll(typeof r.value=="string"?[r.value]:r.value):$().auth(r.value));return(u,F)=>(o(),b("div",I,[l(a)?S(u.$slots,"default",{key:0}):S(u.$slots,"no-auth",{key:1})]))}}),K={class:"flex flex-col gap-4 p-4"},O={class:"space-y-2"},Q={class:"space-x-2"},W={class:"flex-col-start space-y-2"},Y={class:"text-sm space-y-2"},ts=A({__name:"index",setup(P){const r=q(),a=E(),u=M(),{auth:F,authAll:N}=$();async function V(d){await u.login({account:d,password:""}),await u.getPermissions()}function D(){r.push({path:"/feature/permission/test"})}function x(d){F(d)?C({type:"success",message:"校验通过"}):C({type:"danger",message:"校验不通过"})}function L(d){N(d)?C({type:"success",message:"校验通过"}):C({type:"danger",message:"校验不通过"})}return(d,s)=>{const v=H,f=X,g=J,T=j,w=G("auth");return o(),p(T,{navbar:"","navbar-start-side":"back"},{default:e(()=>[n("div",K,[l(a).settings.app.enablePermission?(o(),p(v,{key:1,title:"切换账号",class:"m-0"},{default:e(()=>[n("div",O,[n("div",Q,[(o(),b(U,null,R([{label:"admin",value:"admin"},{label:"test",value:"test"},{label:"hooray(无权限)",value:"hooray"}],(m,_)=>i(f,{key:_,variant:l(u).account===m.value?"default":"outline",onClick:Z=>V(m.value)},{default:e(()=>[t(B(m.label),1)]),_:2},1032,["variant","onClick"])),64))]),n("div",null,"当前账号权限："+B(l(u).permissions),1)])]),_:1})):(o(),p(v,{key:0,class:"m-0"},{default:e(()=>[...s[4]||(s[4]=[t(" 请到 settings.ts 里设置并开启权限功能，再进入该页面查看演示 ",-1)])]),_:1})),l(a).settings.app.enablePermission?(o(),p(v,{key:2,title:"路由鉴权",class:"m-0"},{default:e(()=>[i(f,{onClick:D},{default:e(()=>[...s[5]||(s[5]=[t(" 跳转页面 ",-1)])]),_:1})]),_:1})):k("",!0),l(a).settings.app.enablePermission?(o(),p(v,{key:3,title:"鉴权指令",class:"m-0"},{default:e(()=>[n("div",W,[y((o(),b("div",null,[...s[6]||(s[6]=[t(" 如果你有 permission.browse 权限则能看到这句话 ",-1)])])),[[w,"permission.browse"]]),y((o(),b("div",null,[...s[7]||(s[7]=[t(" 如果你有 permission.create 权限则能看到这句话 ",-1)])])),[[w,"permission.create"]]),y((o(),b("div",null,[...s[8]||(s[8]=[t(" 如果你有 permission.browse 或 permission.create 权限则能看到这句话 ",-1)])])),[[w,["permission.browse","permission.create"]]]),y((o(),b("div",null,[...s[9]||(s[9]=[t(" 如果你有 permission.browse 和 permission.create 权限则能看到这句话 ",-1)])])),[[w,["permission.browse","permission.create"],void 0,{all:!0}]])])]),_:1})):k("",!0),l(a).settings.app.enablePermission?(o(),p(v,{key:4,title:"鉴权组件",class:"m-0"},{default:e(()=>[n("div",Y,[n("div",null,[s[12]||(s[12]=t(" 你 ",-1)),i(g,{value:"permission.browse"},{"no-auth":e(()=>[...s[10]||(s[10]=[n("b",null,"没有",-1)])]),default:e(()=>[s[11]||(s[11]=n("b",null,"有",-1))]),_:1}),s[13]||(s[13]=t(" permission.browse 权限 ",-1))]),n("div",null,[s[16]||(s[16]=t(" 你 ",-1)),i(g,{value:"permission.create"},{"no-auth":e(()=>[...s[14]||(s[14]=[n("b",null,"没有",-1)])]),default:e(()=>[s[15]||(s[15]=n("b",null,"有",-1))]),_:1}),s[17]||(s[17]=t(" permission.create 权限 ",-1))]),n("div",null,[s[20]||(s[20]=t(" 你 ",-1)),i(g,{value:["permission.browse","permission.create"]},{"no-auth":e(()=>[...s[18]||(s[18]=[n("b",null,"没有",-1)])]),default:e(()=>[s[19]||(s[19]=n("b",null,"有",-1))]),_:1}),s[21]||(s[21]=t(" permission.browse 或 permission.create 权限 ",-1))]),n("div",null,[s[24]||(s[24]=t(" 你 ",-1)),i(g,{value:["permission.browse","permission.create"],all:""},{"no-auth":e(()=>[...s[22]||(s[22]=[n("b",null,"没有",-1)])]),default:e(()=>[s[23]||(s[23]=n("b",null,"有",-1))]),_:1}),s[25]||(s[25]=t(" permission.browse 和 permission.create 权限 ",-1))])])]),_:1})):k("",!0),l(a).settings.app.enablePermission?(o(),p(v,{key:5,title:"鉴权函数",class:"m-0","main-class":"flex flex-col gap-2"},{default:e(()=>[i(f,{variant:"outline",onClick:s[0]||(s[0]=m=>x("permission.browse"))},{default:e(()=>[...s[26]||(s[26]=[t(" 校验 browse 权限 ",-1)])]),_:1}),i(f,{variant:"outline",onClick:s[1]||(s[1]=m=>x("permission.create"))},{default:e(()=>[...s[27]||(s[27]=[t(" 校验 create 权限 ",-1)])]),_:1}),i(f,{variant:"outline",onClick:s[2]||(s[2]=m=>x(["permission.browse","permission.create"]))},{default:e(()=>[...s[28]||(s[28]=[t(" 校验 browse 或 create 权限 ",-1)])]),_:1}),i(f,{variant:"outline",onClick:s[3]||(s[3]=m=>L(["permission.browse","permission.create"]))},{default:e(()=>[...s[29]||(s[29]=[t(" 校验 browse 和 create 权限 ",-1)])]),_:1})]),_:1})):k("",!0)])]),_:1})}}});export{ts as default};
